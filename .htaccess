RewriteEngine On

# 1. Redirect index.php or /index to /
RewriteCond %{THE_REQUEST} /index(\.php)? [NC]
RewriteRule ^index(\.php)?$ / [R=301,L]

# 2. Skip rewrite for important PHP handlers (POST support)
RewriteCond %{REQUEST_URI} ^/(email-function-air|nashik-local-booking-mail|email-function|outstation-mail|location_mail | oneway-mail | roundtrip-mail)\.php$ [NC]
RewriteRule ^ - [L]

# 3. Redirect .php to clean URLs (SEO fix)
RewriteCond %{THE_REQUEST} ^[A-Z]{3,}\s/+(.+?)\.php[\s?] [NC]
RewriteRule ^ %1 [R=301,L]

# 4. Internally rewrite clean URLs to .php if file exists
RewriteCond %{REQUEST_FILENAME}.php -f
RewriteRule ^([a-zA-Z0-9_-]+)/?$ $1.php [L]

# 5. Redirect all non-existing URLs to homepage
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^.*$ / [R=301,L]
